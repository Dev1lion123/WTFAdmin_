{"ast":null,"code":"// Language-neutral expression to match ER_UPDATE_INFO\nvar ER_UPDATE_INFO_REGEXP = /^[^:0-9]+: [0-9]+[^:0-9]+: ([0-9]+)[^:0-9]+: [0-9]+[^:0-9]*$/;\nmodule.exports = OkPacket;\nfunction OkPacket(options) {\n  options = options || {};\n  this.fieldCount = undefined;\n  this.affectedRows = undefined;\n  this.insertId = undefined;\n  this.serverStatus = undefined;\n  this.warningCount = undefined;\n  this.message = undefined;\n  this.protocol41 = options.protocol41;\n}\nOkPacket.prototype.parse = function (parser) {\n  this.fieldCount = parser.parseUnsignedNumber(1);\n  this.affectedRows = parser.parseLengthCodedNumber();\n  this.insertId = parser.parseLengthCodedNumber();\n  if (this.protocol41) {\n    this.serverStatus = parser.parseUnsignedNumber(2);\n    this.warningCount = parser.parseUnsignedNumber(2);\n  }\n  this.message = parser.parsePacketTerminatedString();\n  this.changedRows = 0;\n  var m = ER_UPDATE_INFO_REGEXP.exec(this.message);\n  if (m !== null) {\n    this.changedRows = parseInt(m[1], 10);\n  }\n};\nOkPacket.prototype.write = function (writer) {\n  writer.writeUnsignedNumber(1, 0x00);\n  writer.writeLengthCodedNumber(this.affectedRows || 0);\n  writer.writeLengthCodedNumber(this.insertId || 0);\n  if (this.protocol41) {\n    writer.writeUnsignedNumber(2, this.serverStatus || 0);\n    writer.writeUnsignedNumber(2, this.warningCount || 0);\n  }\n  writer.writeString(this.message);\n};","map":{"version":3,"names":["ER_UPDATE_INFO_REGEXP","module","exports","OkPacket","options","fieldCount","undefined","affectedRows","insertId","serverStatus","warningCount","message","protocol41","prototype","parse","parser","parseUnsignedNumber","parseLengthCodedNumber","parsePacketTerminatedString","changedRows","m","exec","parseInt","write","writer","writeUnsignedNumber","writeLengthCodedNumber","writeString"],"sources":["G:/GH projects/WTFAdmin/node_modules/mysql/lib/protocol/packets/OkPacket.js"],"sourcesContent":["\r\n// Language-neutral expression to match ER_UPDATE_INFO\r\nvar ER_UPDATE_INFO_REGEXP = /^[^:0-9]+: [0-9]+[^:0-9]+: ([0-9]+)[^:0-9]+: [0-9]+[^:0-9]*$/;\r\n\r\nmodule.exports = OkPacket;\r\nfunction OkPacket(options) {\r\n  options = options || {};\r\n\r\n  this.fieldCount   = undefined;\r\n  this.affectedRows = undefined;\r\n  this.insertId     = undefined;\r\n  this.serverStatus = undefined;\r\n  this.warningCount = undefined;\r\n  this.message      = undefined;\r\n  this.protocol41   = options.protocol41;\r\n}\r\n\r\nOkPacket.prototype.parse = function(parser) {\r\n  this.fieldCount   = parser.parseUnsignedNumber(1);\r\n  this.affectedRows = parser.parseLengthCodedNumber();\r\n  this.insertId     = parser.parseLengthCodedNumber();\r\n  if (this.protocol41) {\r\n    this.serverStatus = parser.parseUnsignedNumber(2);\r\n    this.warningCount = parser.parseUnsignedNumber(2);\r\n  }\r\n  this.message      = parser.parsePacketTerminatedString();\r\n  this.changedRows  = 0;\r\n\r\n  var m = ER_UPDATE_INFO_REGEXP.exec(this.message);\r\n  if (m !== null) {\r\n    this.changedRows = parseInt(m[1], 10);\r\n  }\r\n};\r\n\r\nOkPacket.prototype.write = function(writer) {\r\n  writer.writeUnsignedNumber(1, 0x00);\r\n  writer.writeLengthCodedNumber(this.affectedRows || 0);\r\n  writer.writeLengthCodedNumber(this.insertId || 0);\r\n  if (this.protocol41) {\r\n    writer.writeUnsignedNumber(2, this.serverStatus || 0);\r\n    writer.writeUnsignedNumber(2, this.warningCount || 0);\r\n  }\r\n  writer.writeString(this.message);\r\n};\r\n"],"mappings":"AACA;AACA,IAAIA,qBAAqB,GAAG,8DAA8D;AAE1FC,MAAM,CAACC,OAAO,GAAGC,QAAQ;AACzB,SAASA,QAAQA,CAACC,OAAO,EAAE;EACzBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EAEvB,IAAI,CAACC,UAAU,GAAKC,SAAS;EAC7B,IAAI,CAACC,YAAY,GAAGD,SAAS;EAC7B,IAAI,CAACE,QAAQ,GAAOF,SAAS;EAC7B,IAAI,CAACG,YAAY,GAAGH,SAAS;EAC7B,IAAI,CAACI,YAAY,GAAGJ,SAAS;EAC7B,IAAI,CAACK,OAAO,GAAQL,SAAS;EAC7B,IAAI,CAACM,UAAU,GAAKR,OAAO,CAACQ,UAAU;AACxC;AAEAT,QAAQ,CAACU,SAAS,CAACC,KAAK,GAAG,UAASC,MAAM,EAAE;EAC1C,IAAI,CAACV,UAAU,GAAKU,MAAM,CAACC,mBAAmB,CAAC,CAAC,CAAC;EACjD,IAAI,CAACT,YAAY,GAAGQ,MAAM,CAACE,sBAAsB,CAAC,CAAC;EACnD,IAAI,CAACT,QAAQ,GAAOO,MAAM,CAACE,sBAAsB,CAAC,CAAC;EACnD,IAAI,IAAI,CAACL,UAAU,EAAE;IACnB,IAAI,CAACH,YAAY,GAAGM,MAAM,CAACC,mBAAmB,CAAC,CAAC,CAAC;IACjD,IAAI,CAACN,YAAY,GAAGK,MAAM,CAACC,mBAAmB,CAAC,CAAC,CAAC;EACnD;EACA,IAAI,CAACL,OAAO,GAAQI,MAAM,CAACG,2BAA2B,CAAC,CAAC;EACxD,IAAI,CAACC,WAAW,GAAI,CAAC;EAErB,IAAIC,CAAC,GAAGpB,qBAAqB,CAACqB,IAAI,CAAC,IAAI,CAACV,OAAO,CAAC;EAChD,IAAIS,CAAC,KAAK,IAAI,EAAE;IACd,IAAI,CAACD,WAAW,GAAGG,QAAQ,CAACF,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EACvC;AACF,CAAC;AAEDjB,QAAQ,CAACU,SAAS,CAACU,KAAK,GAAG,UAASC,MAAM,EAAE;EAC1CA,MAAM,CAACC,mBAAmB,CAAC,CAAC,EAAE,IAAI,CAAC;EACnCD,MAAM,CAACE,sBAAsB,CAAC,IAAI,CAACnB,YAAY,IAAI,CAAC,CAAC;EACrDiB,MAAM,CAACE,sBAAsB,CAAC,IAAI,CAAClB,QAAQ,IAAI,CAAC,CAAC;EACjD,IAAI,IAAI,CAACI,UAAU,EAAE;IACnBY,MAAM,CAACC,mBAAmB,CAAC,CAAC,EAAE,IAAI,CAAChB,YAAY,IAAI,CAAC,CAAC;IACrDe,MAAM,CAACC,mBAAmB,CAAC,CAAC,EAAE,IAAI,CAACf,YAAY,IAAI,CAAC,CAAC;EACvD;EACAc,MAAM,CAACG,WAAW,CAAC,IAAI,CAAChB,OAAO,CAAC;AAClC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}